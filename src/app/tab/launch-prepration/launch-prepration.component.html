<div class="launch-preparation-container">
  <section class="video-section">
    <h2 class="flex items-center gap-2"><i class="fas fa-video"></i><span>{{ 'introductionVideo' | translate }}</span></h2>
    <div class="vedio">
      <video controls src="https://businesstools-admin.valuenationapp.com{{videoUrl}}" autoplay></video>

  </div>
    <p class="video-description">{{videoDescription}}</p>
  </section>
  <!-- Launch Checklist Section -->
  <section class="form-section">
    <h2><i class="fas fa-tasks"></i> {{ 'launchChecklist' | translate }}</h2>
    <p class="section-description">{{ 'launchChecklistDescription' | translate }}</p>

    <div class="tasks-list">
      <div class="task-item" *ngFor="let task of tasks; let i = index">
        <div class="task-header">
          <h3>{{ 'taskLabel' | translate }} {{i + 1}}</h3>
          <button class="btn btn-danger remove-btn" (click)="removeTask(i)">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="task-inputs">
          <div class="field-row">
            <div class="input-group">
              <label class="field-label">{{ 'categoryLabel' | translate }}</label>
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="task.category"
                [placeholder]="'taskCategoryPlaceholder' | translate"
              >
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'taskLabel' | translate }}</label>
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="task.task"
                [placeholder]="'taskDescriptionPlaceholder' | translate"
              >
            </div>
          </div>
          <div class="field-row">
            <div class="input-group">
              <label class="field-label">{{ 'dueDateLabel' | translate }}</label>
              <input 
                type="date" 
                class="form-control"
                [(ngModel)]="task.dueDate"
              >
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'statusLabel' | translate }}</label>
              <select 
                class="form-control"
                [(ngModel)]="task.status"
              >
                <option *ngFor="let status of statusOptions" [value]="status">
                  {{status | translate}}
                </option>
              </select>
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'assigneeLabel' | translate }}</label>
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="task.assignee"
                [placeholder]="'assigneePlaceholder' | translate"
              >
            </div>
          </div>
          <div class="input-group">
            <label class="field-label">{{ 'notes' | translate }}</label>
            <textarea
              class="form-control notes-input"
              rows="2"
              [(ngModel)]="task.notes"
              [placeholder]="'extraNotesPlaceholder' | translate"
            ></textarea>
          </div>
        </div>
      </div>
    </div>
    <button class="btn btn-outline-primary add-btn flex items-center gap-2" (click)="addTask()">
      <i class="fas fa-plus"></i> {{ 'addTask' | translate }}
    </button>
  </section>

  <!-- Marketing Activities Section -->
  <section class="form-section">
    <h2><i class="fas fa-bullhorn"></i> {{ 'marketingActivities' | translate }}</h2>
    <p class="section-description">{{ 'marketingActivitiesDescription' | translate }}</p>

    <div class="activities-list">
      <div class="activity-item" *ngFor="let activity of marketingActivities; let i = index">
        <div class="activity-header">
          <h3>{{ 'activityLabel' | translate }} {{i + 1}}</h3>
          <button class="btn btn-danger remove-btn" (click)="removeMarketingActivity(i)">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="activity-inputs">
          <div class="field-row">
            <div class="input-group">
              <label class="field-label">{{ 'activityLabel' | translate }}</label>
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="activity.activity"
                [placeholder]="'activityDescriptionPlaceholder' | translate"
              >
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'timelineLabel' | translate }}</label>
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="activity.timeline"
                [placeholder]="'timelinePlaceholder' | translate"
              >
            </div>
          </div>
          <div class="field-row">
            <div class="input-group">
              <label class="field-label">{{ 'budgetLabel' | translate }}</label>
              <input 
                type="number" 
                class="form-control amount-input"
                [(ngModel)]="activity.budget"
                placeholder="0"
              >
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'statusLabel' | translate }}</label>
              <select 
                class="form-control"
                [(ngModel)]="activity.status"
              >
                <option *ngFor="let status of marketingStatusOptions" [value]="status">
                  {{status | translate}}
                </option>
              </select>
            </div>
          </div>
          <div class="metrics-section">
            <label class="field-label">{{ 'successMetrics' | translate }}</label>
            <div class="metrics-list">
              <div class="metric-item" *ngFor="let metric of activity.metrics; let j = index ;trackBy: trackByIndex">
                <input 
                  type="text" 
                  class="form-control"
                  [(ngModel)]="activity.metrics[j]"
                  [placeholder]="'successMetricPlaceholder' | translate"
                >
                <button class="btn btn-danger remove-btn" (click)="removeMetric(i, j)">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <button class="btn btn-outline-secondary add-btn" (click)="addMetric(i)">
                <i class="fas fa-plus"></i> Add Metric
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button class="btn btn-outline-primary add-btn" (click)="addMarketingActivity()">
      <i class="fas fa-plus"></i> Add Marketing Activity
    </button>
  </section>

  <!-- Risk Assessment Section -->
  <section class="form-section">
    <h2><i class="fas fa-exclamation-triangle"></i> {{ 'riskAssessment' | translate }}</h2>
    <p class="section-description">{{ 'riskAssessmentDescription' | translate }}</p>

    <div class="risks-list">
      <div class="risk-item" *ngFor="let risk of risks; let i = index">
        <div class="risk-header">
          <h3>{{ 'riskLabel' | translate }} {{i + 1}}</h3>
          <button class="btn btn-danger remove-btn" (click)="removeRisk(i)">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="risk-inputs">
          <div class="input-group">
            <label class="field-label">{{ 'descriptionLabel' | translate }}</label>
            <textarea 
              class="form-control"
              rows="2"
              [(ngModel)]="risk.description"
              [placeholder]="'riskDescriptionPlaceholder' | translate"
            ></textarea>
          </div>
          <div class="field-row">
            <div class="input-group">
              <label class="field-label">{{ 'impactLabel' | translate }}</label>
              <select
                class="form-control"
                [(ngModel)]="risk.impact"
              >
                <option *ngFor="let level of impactOptions" [value]="level">
                  {{level | translate}}
                </option>
              </select>
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'probabilityLabel' | translate }}</label>
              <select
                class="form-control"
                [(ngModel)]="risk.probability"
              >
                <option *ngFor="let level of probabilityOptions" [value]="level">
                  {{level | translate}}
                </option>
              </select>
            </div>
          </div>
          <div class="mitigation-section">
            <label class="field-label">{{ 'mitigationStrategiesLabel' | translate }}</label>
            <div class="strategies-list">
              <div class="strategy-item" *ngFor="let strategy of risk.mitigationStrategies; let j = index; trackBy: trackByIndex">
                <input 
                  type="text" 
                  class="form-control"
                  [(ngModel)]="risk.mitigationStrategies[j]"
                  [placeholder]="'mitigationStrategyPlaceholder' | translate"
                >
                <button class="btn btn-danger remove-btn" (click)="removeMitigationStrategy(i, j)">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <button class="btn btn-outline-secondary add-btn" (click)="addMitigationStrategy(i)">
                <i class="fas fa-plus"></i> Add Strategy
              </button>
            </div>
          </div>
          <div class="input-group">
            <label class="field-label">{{ 'contingencyPlanLabel' | translate }}</label>
            <textarea 
              class="form-control"
              rows="2"
              [(ngModel)]="risk.contingencyPlan"
              [placeholder]="'contingencyPlanPlaceholder' | translate"
            ></textarea>
          </div>
        </div>
      </div>
    </div>
    <button class="btn btn-outline-primary add-btn" (click)="addRisk()">
      <i class="fas fa-plus"></i> Add Risk
    </button>
  </section>

  <!-- Launch Milestones Section -->
  <section class="form-section">
    <h2><i class="fas fa-flag-checkered"></i> {{ 'launchMilestones' | translate }}</h2>
    <p class="section-description">{{ 'launchMilestonesDescription' | translate }}</p>

    <div class="milestones-list">
      <div class="milestone-item" *ngFor="let milestone of milestones; let i = index ">
        <div class="milestone-header">
          <h3>{{ 'milestoneLabel' | translate }} {{i + 1}}</h3>
          <button class="btn btn-danger remove-btn" (click)="removeMilestone(i)">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="milestone-inputs">
          <div class="field-row">
            <div class="input-group">
              <label class="field-label">{{ 'descriptionLabel' | translate }}</label>
              <input 
                type="text" 
                class="form-control"
                [(ngModel)]="milestone.description"
                [placeholder]="'milestoneDescriptionPlaceholder' | translate"
              >
            </div>
            <div class="input-group">
              <label class="field-label">{{ 'dueDateLabel' | translate }}</label>
              <input 
                type="date" 
                class="form-control"
                [(ngModel)]="milestone.dueDate"
              >
            </div>
          </div>
          <div class="input-group">
            <label class="field-label">{{ 'statusLabel' | translate }}</label>
            <select 
              class="form-control"
              [(ngModel)]="milestone.status"
            >
              <option *ngFor="let status of statusOptions" [value]="status">
                {{status | translate}}
              </option>
            </select>
          </div>
          <div class="dependencies-section">
            <label class="field-label">{{ 'dependenciesLabel' | translate }}</label>
            <div class="dependencies-list">
              <div class="dependency-item" *ngFor="let dependency of milestone.dependencies; let j = index; trackBy: trackByIndex">
                <input 
                  type="text" 
                  class="form-control"
                  [(ngModel)]="milestone.dependencies[j]"
                  [placeholder]="'dependencyPlaceholder' | translate"
                >
                <button class="btn btn-danger remove-btn" (click)="removeDependency(i, j)">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <button class="btn btn-outline-secondary add-btn" (click)="addDependency(i)">
                <i class="fas fa-plus"></i> Add Dependency
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button class="btn btn-outline-primary add-btn" (click)="addMilestone()">
      <i class="fas fa-plus"></i> Add Milestone
    </button>
  </section>

  <!-- Save Progress Button -->
  <div class="save-section">
    <button class="btn btn-primary save-progress" *ngIf="isSaved" (click)="saveProgress()">
      <i class="fas fa-save"></i> Save Progress
    </button>
  </div>
  <div class="save-section">
    <button class="btn btn-primary save-progress" *ngIf="!isSaved" (click)="updateProgress()">
      <i class="fas fa-save"></i> Update Progress
    </button>
  </div>
</div>
<button *ngIf="showButton" class="go-up-btn" (click)="scrollToTop()">
  ⬆
</button>